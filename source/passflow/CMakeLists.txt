cmake_minimum_required(VERSION 3.20)
project(passflow)

#[[
  If you do not specify GP_OPT_FRAME_RESOURCES_KEY_TYPE from the command line, use the internal
  temporary variable value as default.
  If you want to modify the variable again from the command line, you need to delete the file named
  "CMakeCache.txt", and run "cmake ..." again for it to take effect.
  If the project is generated by build.sh, you need to run "./clean.sh --project" first, and run
  "./build.sh ..." again.
]]#
set(GP_OPT_FRAME_RESOURCES_KEY_TYPE ${GP_OPT_FRAME_RESOURCES_KEY_TYPE})
if(NOT ${GP_OPT_FRAME_RESOURCES_KEY_TYPE} STREQUAL "")
  add_definitions(-DGP_OPT_FRAME_RESOURCES_KEY_TYPE=${GP_OPT_FRAME_RESOURCES_KEY_TYPE})
  message(STATUS "Custom FRsKey type: ${GP_OPT_FRAME_RESOURCES_KEY_TYPE}")
endif()

file(GLOB_RECURSE SRC *.h *.cpp)
add_library(${PROJECT_NAME} STATIC ${SRC} ${INC})
target_link_libraries(${PROJECT_NAME} backend)

install_artifact(${PROJECT_NAME})

source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR}/../.. FILES ${SRC} ${INC})
